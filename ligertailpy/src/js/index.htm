<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Strict//EN">
<html>
  <head>
<script src = "../js/postrequest.js">
</script>
<script src = "../js/jquery-1.4.4.js">
</script>
<script src = "../js/json2.js">
</script>
<script src = "../js/apiproxy.js">
</script>
<script src = "../js/apihandler.js">
</script>
 
<script>
var initialized = false;
$(document).ready(function(){
  init('www.nytimes3.com');
});
 
function init(publisherUrl) {
  if (initialized) {
    return;
  }
  var initialized = true;
  var apiHandler = new ApiHandler();
  /*var domain = "http://" + window.document.location.hostname;
  if (window.document.location.port) {
	  domain += ":" + window.document.location.port;
  }*/
  var domain = "http://5.latest.ligertailbackend.appspot.com"
  window.api = new Api();
  api.init(domain, apiHandler);
  window.publisherUrl = publisherUrl
}

function submitItem() {
	var item = {};
  item.publisherUrl = publisherUrl;
  item.url = "www.blah.com";
  item.title = "blah";
  item.description = "blahblah";
  item.email = "email@emal.com";
  api.submitItem(item);	  
}

function submitPaidItem() {
	  var item = {};
	  item.publisherUrl = publisherUrl;
	  item.url = "www.blah.com";
	  item.title = "blah";
	  item.description = "blahblah";
	  item.email = "email@emal.com";
	  item.price = 50;
	  api.submitItem(item);   	
}

function getOrderedItems() {
    api.getOrderedItems(publisherUrl);     
}


function getPaidItems() {
    api.getPaidItems(publisherUrl);     
}

function getItemStats() {
	var itemId = 100;
	api.getItemStats(publisherUrl, itemId);
}

function getFilter() {
	api.getFilter(publisherUrl);
}

function submitFilter() {
	filter = {};
	filter.duration = Duration.ETERNITY;
	filter.popularity = 50;
	filter.recency = 50;
	api.submitFilter(publisherUrl, filter);
}

function submitUserInteraction() {
	interactions = [];
	interactions[0] = {itemId:100, statType: StatType.VIEWS};
	interactions[1] = {itemId:101, statType: StatType.CLOSES};
	api.submitUserInteraction(publisherUrl, interactions);
}

</script>
</head>
</HTML>
<BODY>

<A href="#" onMouseDown="init('www.nytimes3.com')"><div>init api</div></A>
<A href="#" onMouseDown="submitItem()" ><div> submit item</div></A>
<A href="#" onMouseDown="submitPaidItem()" ><div> submit paid item</div></A>
<A href="#" onMouseDown="getOrderedItems()" ><div> get ordered items</div></A>
<A href="#" onMouseDown="getPaidItems()" ><div> get paid items</div></A>
<A href="#" onMouseDown="getItemStats()" ><div> get item stats</div></A>
<A href="#" onMouseDown="getFilter()" ><div> get filter</div></A>
<A href="#" onMouseDown="submitFilter()" ><div> submit filter</div></A>
<A href="#" onMouseDown="submitUserInteraction()" ><div> submit user interaction</div></A>

</BODY>
